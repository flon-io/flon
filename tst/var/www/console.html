
<!DOCTYPE HTML>

<html>
  <head>
    <title>flon</title>
    <link href="css/flon.css" rel="stylesheet" />
  </head>

  <body>

    <div class="panes">

      <div class="left-pane">

        <h1>flon</h1>
        <h2>post to /i/in</h2>
        <p>
          <textarea id="inField">
          </textarea>
          <input id="inSubmit" type="submit" />
        </p>
      </div>

      <div class="right-pane">

        <div id="log">
        </div>
      </div>
    </div>

    <script>

      function inOnError(e)
      {
        console.log(e);
      }
      function inOnLoad(e)
      {
        console.log(e.target);
        var elt = document.createElement('div');
        elt.textContent = e.target.responseText;
        document.getElementById('log').appendChild(elt);
      }

      function inSubmit()
      {
        var req = new XMLHttpRequest();
        req.open('POST', './i/in', true);
        req.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        req.onerror = inOnError;
        req.onload = inOnLoad;
        req.send(document.getElementById("inField").value);
      }

      document.getElementById("inSubmit").addEventListener('click', inSubmit);

      document.addEventListener('DOMContentLoaded', function() {

        document.getElementById("inField").textContent =
          document.getElementById("launchJson").textContent;
      });
    </script>

    <div id="launchJson" class="hidden">
{
  domain: org.example
  execute:
    [ sequence, {}, [
      [ invoke, { _0: stamp, color: red }, [] ]
      [ invoke, { _0: stamp, color: green }, [] ]
      [ invoke, { _0: stamp, color: blue }, [] ]
    ] ]
  payload: {
    hello: world
  }
}
    </div>
  </body>
</html>

